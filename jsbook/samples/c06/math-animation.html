<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math.sin()、Math.cos()を使ってHTML要素をアニメーション</title>
  <link rel="stylesheet" href="../res/style.css">
  <style>
    #animation {
      position: fixed;
      top: calc(50% - 126px + 86px);
      left: calc(50% - 80px);
    }
    #animation img {
      width: 160px;
      height: auto;
    }
  </style>
  <script type="module">
    const startAnimation = (duration) => {
      const shot = (timestamp) => {
        // 回転角度の計算
        deg += (360 * 3 / duration) * (timestamp - prevstamp);
        // 位置の計算（三角関数）
        const rad = (deg * Math.PI) / 180;
        const cos = Math.cos(rad) * (duration - timestamp) / 40;
        const sin = Math.sin(rad) * (duration - timestamp) / 10;
        element.style['transform'] = `
          translate(${cos}px, ${sin}px) 
          rotate(${deg}deg)
        `;

        if (timestamp < duration) {
          prevstamp = timestamp;
          requestAnimationFrame(shot);
        }
      };

      const element = document.querySelector('#animation');
      let deg = 0;
      let prevstamp = 0;
      requestAnimationFrame(shot);
    };
    
    startAnimation(2000);
  </script>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="flcon">
        <div class="logo"><a href="../index.html"><img src="../res/logo.svg" alt="JavaScript" width="60"></a></div>
        <div class="title">
          <h1>Math.sin()、Math.cos()を使ってHTML要素をアニメーション</h1>
        </div>
      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <div id="animation">
        <img src="../res/animation.png" alt="">
      </div>
    </div>
  </main>
</body>
</html>


